<!DOCTYPE html>
<!--[if lte IE 9 ]><html class="ie9lte"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html><!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>suggest-company</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="./css/example.css" rel="stylesheet">

	<!-- basic CSS theme for suggest -->
	<link href="./css/suggest-company.css" rel="stylesheet">

	<!-- required JS-->
	<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.bundle.min.js"></script>

	<script src="./js/suggest-company.js"></script>

	<script type="text/javascript">

	$(function(){
		var $form;

		var proxy_url = './server/index.php';

		// FOR MAPPING BETWEEN NAMES IN API AND YOUR FORM
		var api_to_inputs = {
				// API ATTRIBUTE: INPUT NAME
				"name": "companyName",
				"regno": "regNumber",
				"vatno": "vatNumber",
				"address": {
					"municipality": "municipality",
					"street": "street",
					"number": "number",
					"postal_code": "postal_code",
					"country_code": "country_code",
				},
				"emails": {
					0: "email"
				},
				"phones": {
					0: "phone"
				}
			};


		$('[name="companyName"]', $form = $('#suggestCompanyForm')).merkSuggestify({
			suggestBy: 'name',
			proxyUrl: proxy_url,
			mapping: api_to_inputs,
			requestDelay: 10 // suggestion refresh rate in miliseconds; default: 300
		});

		$('[name="email"]', $form).merkSuggestify({
			suggestBy: 'email',
			proxyUrl: proxy_url,
			mapping: api_to_inputs
		});

		$('[name="regNumber"]', $form).merkSuggestify({
			suggestBy: 'regno',
			proxyUrl: proxy_url,
			mapping: api_to_inputs,
			template: function(obj){ // custom template for suggested items
				return obj.name;
			}
		});

	});

	</script>
</head>

<body>

	<h1>Vyzkoušejte si chytrý kontaktní formulář</h1>

	<p>Formulář je propojený se službou <a href="http://www.merk.cz/">merk.cz</a> pomocí <a href="https://api.merk.cz/docs/">Merk API</a>.</p>

	<p>Pro doplnění všech polí stačí zadat jen několik málo znaků. Napište <strong>název firmy</strong> 
		(nápověda se zobrazí už při zadání tří prvních písmen), <strong>IČ</strong> nebo <strong>e-mail,</strong>
		zbytek firemních údajů se doplní automaticky.</p>

	<p>Použití formuláře je jednoduché a nasazení také. Usnadní vám práci ve vlastních interních aplikacích, 
		nebo vašim klientům například při registraci do zákaznického systému nebo při zadávání kontaktních údaju v e-shopu.</p>  

	<p>Návod na nasazení najdete <a href="https://github.com/impercz/merk-suggest-company-js">zde</a>.</p>

	<form id='suggestCompanyForm'>
		<div><button type="reset">Vymazat formulář</button></div>
		<div><label>Název firmy</label><input name="companyName" placeholder="Název firmy" /></div>
		<div><label>E-mail</label><input name="email" placeholder="E-mail" /></div>
		<div><label>IČ</label><input name="regNumber" placeholder="IČ" /></div>
		<div><label>DIČ</label><input name="vatNumber" placeholder="DIČ" /></div>
		<div><label>Město</label><input name="municipality" placeholder="Město" /></div>
		<div><label>Ulice</label><input name="street" placeholder="Ulice"/></div>
		<div><label>Číslo popisné</label><input name="number" placeholder="Číslo popisné"/></div>
		<div><label>PSČ</label><input name="postal_code" placeholder="PSČ"/></div>
		<div><label>Kód země</label><input name="country_code" placeholder="Kód země"/></div>
		<div><label>Telefon</label><input name="phone" placeholder="Telefon"/></div>
	</form>

<script>
</script>

</body>
</html>
